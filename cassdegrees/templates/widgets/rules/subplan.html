{% load static %}

{% verbatim %}
<script type="text/x-template" id="subplanRuleMultiselectTemplate">
    <fieldset v-if="!redraw">

        <div v-if="subplans.length != 0">
            <div class="msg-error" v-if="non_unique_options">Options must be unique!</div>
            <div class="msg-error" v-if="inconsistent_units">Options have different unit values!</div>
            <div class="msg-error" v-if="wrong_year_selected">Selected subplans must have same year as program!</div>
            <div class="msg-error" v-if="is_blank">All options must be filled in!</div>

            <p class="form-group">
                <Label style="width: 20.8333%; text-align: right; float: left;">List name:</Label>
                <input class="text tfull" v-model="details.list_description"
                       placeholder="Optional description for CASS Staff Reference, e.g. CASS Majors" style="margin-left: 0;">
            </p>

            <p class="form-group">
                <label style="width: 20.8333%; text-align: right; float: left;">Student description:</label>
                <input class="text tfull" v-model="details.kind" v-on:change="updateStudentDescriptionLabel()" aria-required="true"
                       placeholder="e.g. Arts Major - brief description for students here" style="margin-left: 0;">
            </p>

            <p class="form-group">
                <label style="width: 20.8333%; text-align: right; float: left;">Subplan type:</label>
                <select v-model="details.subplan_type" v-on:change="change_filter" required style="margin-left: 0;">
                    <option v-for="(msg, type) in subplan_types" v-bind:value="type">{{ msg }}</option>
                </select>
            </p>

            <br>

            <p>Students must pick one {{ student_description_label }} from the following {{ subplan_type_label }}:</p>

            <br>

            <multiselect
                    :options="sortedSubplanList"
                    :value="optionsProxy"
                    @input="updateSelected"
                    :show-labels="true"
                    :multiple="true"
                    :searchable="true"
                    :close-on-select="false"
                    :placeholder="placeholderText"
                    :custom-label="customLabel"
                    track-by="name"
                    :max-height="200"
                    :open-direction="'top'"
                    :loading="showLoadingSpinner"
                    ref="multiselectref"
            >
            </multiselect>

            <ul class="resources-list">
                <template v-for="(resource, index) in sortedSelectedList">
                    <li class="resource-item" :data-index="index">
                        <div class="resource-info">
                            <div class="resource-title" :id="index">
                                <span>{{ resource.code }} - {{ resource.name }} </span>
                            </div>
                        </div>
                        <div class="delete-controls" v-on:click.prevent="remove_subplan(index)">
                            <i class="fa fa-times fa-fw"></i>
                        </div>
                    </li>
                </template>
            </ul>
        </div>
        <div v-else v-html="info_msg"></div>

    </fieldset>
</script>
{% endverbatim %}

<script type="text/javascript" src="{% static "js/staff/rules/subplan.js" %}"></script>
