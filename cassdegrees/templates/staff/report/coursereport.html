{% extends "base.html" %}
{% load static %}
{% load breadcrumbs %}
{% load report %}

{% block page-title %}Course Report{% endblock %}

{% block subtitle %}Course Report{% endblock %}

{% block breadcrumb-trail %}
    {% breadcrumb '/staff/' 'Staff Home'%}
    {% breadcrumb '/staff/list/?view=Course' 'Programs/Subplans/Courses' %}
    {% finalcrumb 'Course Report' %}
{% endblock %}

{% block content %}
    <div>
        <h3>All Courses and their Dependencies</h3>

        <table class="fullwidth tbl-cell-bdr">
            {# Add title row based on what was in the dictionary #}
            <thead>
                <tr>
                    <th>Code</th>
                    <th>Name</th>
                    <th>Units</th>
                    <th>Years Offered</th>
                    <th>Offerings</th>
                    <th>Subplan Dependencies</th>
                    <th>Program Dependencies</th>
                    <th>Status</th>
                </tr>
            </thead>
            {# Add rows containing the contents of each json data instance #}
            <tbody class="list">
            {% for course in courses %}
                <tr>
                    <td>{{ course.code }}</td>
                    <td>{{ course.name }}</td>
                    <td>{{ course.units }}</td>
                    <td>{{ course.offeredYears }}</td>
                    <td>
                        {% if course.offeredSem1 %}Sem1 {% endif %}
                        {% if course.offeredSem2 %}Sem2 {% endif %}
                        {% if course.offeredSummer %}Summer {% endif %}
                        {% if course.offeredAutumn %}Autumn {% endif %}
                        {% if course.offeredWinter %}Winter {% endif %}
                        {% if course.offeredSpring %}Spring {% endif %}
                        {% if course.otherOffering %}Other {% endif %}
                    </td>
                    <td>
                        {% for subplan in dependencies|get_item:course.code|get_item:"subplans" %}
                            {{ subplan.code }}<br />
                        {% endfor %}
                    </td>
                    <td>
                        {% for program in dependencies|get_item:course.code|get_item:"programs" %}
                            {{ program.code }}<br />
                        {% endfor %}
                    </td>
                    <td>
                        {% if course.currentlyActive %}
                            Active
                        {% else %}
                            Inactive
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}

            </tbody>
        </table>
    </div>
{% endblock %}
