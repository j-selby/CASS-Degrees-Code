{% extends "base.html" %}
{% load static %}

{% block page-title %}Edit {{ elementDesc }}{% endblock %}

{% block subtitle %}Edit {{ elementDesc }}{% endblock %}

{% block content %}
    {% if msg != None %}
        <p class="{% if is_error %}msg-error{% else %}msg-success{% endif %}">{{ msg }}</p>
    {% endif %}


    <form class="anuform" id="mainForm" action="" method="post">
        {% csrf_token %}

            <!-- As HTML forms only support get or post methods,
            add this hidden input to hint that it is actually a put request. -->
            <input type="hidden" name="_method" value="patch">

        <fieldset>
            <legend>Configure {{ elementDesc }} Details</legend>
{#            {{ form.as_p }}#}

            {% for field in form %}
                {{ field.errors }}
                <p>{{ field.label_tag }} {{ field }}</p>
            {% endfor %}

        </fieldset>

            {% if elementDesc == "Program Template" %}
            <fieldset>
                <legend>Staff comments</legend>
                <br>
                {{ comment_snippet.as_p }}

            </fieldset>
        {% endif %}

        <fieldset>
            <legend>Edit Content</legend>
            {% if elementDesc == "Subplan" %}<p>Placeholder content pending subplan content input</p>{% endif %}
            {{ content_snippet.as_p }}

        </fieldset>

        <p class="text-right">

        {% if elementDesc == "Subplan" %}
            <p class="text-right">
                <a href="/list/">Cancel</a>
                <input class="btn-uni-grad btn-large" type="submit" value="Save">
            </p>
        {% endif %}

        {% if elementDesc == "Program Template" %}
            <!-- Everything after here is generated on the fly -->
            <input class="text" hidden id="globalRequirements" name="globalRequirements">
        {% endif %}
    </form>

    {% if elementDesc == "Program Template" %}
        {# include deserialised global requirements   #}
        {% include "globalrequirementswidget.html" %}
    {% endif %}
{% endblock %}
